create schema gs;
create database gsopcar;
use gsopcar;
CREATE TABLE users (id INTEGER PRIMARY KEY,username VARCHAR(255) NOT NULL,role VARCHAR(50) NOT NULL,email VARCHAR(255) UNIQUE NOT NULL,password VARCHAR(255) NOT NULL);
INSERT INTO users (id, username, role, email, password) VALUES(101, 'Anna', 'ride_giver', 'anna@gmail.com', 'anna123');
INSERT INTO users (id, username, role, email, password) VALUES(102, 'Rahul', 'passenger', 'rahul@gmail.com ', 'rahul456');
INSERT INTO users (id, username, role, email, password) VALUES(103, 'Baby', 'ride_giver', 'baby@gmail.com', 'baby789');
INSERT INTO users (id, username, role, email, password) VALUES(104, 'Mary', 'passenger', 'mary@gmail.com', 'mary123');
INSERT INTO users (id, username, role, email, password) VALUES(105, 'Abhi', 'passenger', 'abhi@gmail.com', 'abhi123');
select * from users;
CREATE TABLE ride (ride_id INTEGER PRIMARY KEY,ride_giver_id INTEGER NOT NULL,origin VARCHAR(255) NOT NULL,destination VARCHAR(255) NOT NULL,departure TIMESTAMP NOT NULL,available_seats INTEGER NOT NULL CHECK (available_seats >= 0),FOREIGN KEY (ride_giver_id) REFERENCES users(id) ON DELETE CASCADE);
INSERT INTO ride (ride_id, ride_giver_id, origin, destination, departure, available_seats) VALUES(201, 101, 'Kochi', 'Kozhikode', '2025-03-01 08:00:00', 3);
INSERT INTO ride (ride_id, ride_giver_id, origin, destination, departure, available_seats) VALUES(202, 103, 'Banglore', 'Mysore', '2025-03-02 09:30:00', 2);
INSERT INTO ride (ride_id, ride_giver_id, origin, destination, departure, available_seats) VALUES(203, 101, 'Tvm', 'Kollam', '2025-03-03 12:00:00', 4);
INSERT INTO ride (ride_id, ride_giver_id, origin, destination, departure, available_seats) VALUES(204, 103, 'Kannur', 'Wayanad', '2025-03-04 14:15:00', 1);
INSERT INTO ride (ride_id, ride_giver_id, origin, destination, departure, available_seats) VALUES(205, 101, 'Kottaym', 'Alapuzha', '2025-03-05 16:45:00', 5);
select * from ride;
CREATE TABLE Booking (booking_id INTEGER PRIMARY KEY,ride_id INTEGER NOT NULL,passenger_id INTEGER NOT NULL,booking_datetime TIMESTAMP DEFAULT CURRENT_TIMESTAMP,status VARCHAR(50) NOT NULL CHECK (status IN ('Confirmed', 'Cancelled', 'Pending')),FOREIGN KEY (ride_id) REFERENCES ride(ride_id) ON DELETE CASCADE,FOREIGN KEY (passenger_id) REFERENCES users(id) ON DELETE CASCADE);
INSERT INTO Booking (booking_id, ride_id, passenger_id, booking_datetime, status) VALUES(301, 201, 102, '2025-02-20 10:00:00', 'Confirmed');
INSERT INTO Booking (booking_id, ride_id, passenger_id, booking_datetime, status) VALUES(302, 201, 104, '2025-02-21 11:30:00', 'Pending');
INSERT INTO Booking (booking_id, ride_id, passenger_id, booking_datetime, status) VALUES(303, 202, 105, '2025-02-22 12:45:00', 'Confirmed');
INSERT INTO Booking (booking_id, ride_id, passenger_id, booking_datetime, status) VALUES(304, 204, 102, '2025-02-23 14:00:00', 'Cancelled');
INSERT INTO Booking (booking_id, ride_id, passenger_id, booking_datetime, status) VALUES(305, 205, 104, '2025-02-24 15:15:00', 'Confirmed');
select * from Booking;
CREATE TABLE Payment (payment_id INTEGER PRIMARY KEY,booking_id INTEGER NOT NULL,amount DECIMAL(10,2) NOT NULL CHECK (amount >= 0),payment_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,FOREIGN KEY (booking_id) REFERENCES Booking(booking_id) ON DELETE CASCADE);
INSERT INTO Payment (payment_id, booking_id, amount, payment_date) VALUES(401, 301, 25.00, '2025-02-20 10:30:00');
INSERT INTO Payment (payment_id, booking_id, amount, payment_date) VALUES(402, 303, 30.50, '2025-02-22 13:00:00');
INSERT INTO Payment (payment_id, booking_id, amount, payment_date) VALUES(403, 305, 20.00, '2025-02-24 15:45:00');
INSERT INTO Payment (payment_id, booking_id, amount, payment_date) VALUES(404, 301, 15.75, '2025-02-20 10:35:00');
select * from Payment;
